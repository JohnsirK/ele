webpackJsonp([19],{"4T7j":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("Xxa5"),n=a.n(s),r=a("exGp"),i=a.n(r),c=a("P9l9"),o=a("EQn/"),h=a("YB1/"),l=a("Au9i"),u={data:function(){return{searchKeyword:null,searchData:[],img_url:"//elm.cangdu.org/img/",searchListArr:[],hisData:[]}},methods:{actionSearch:function(t,e){var a=this;return i()(n.a.mark(function s(){var r,i;return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(null!=e&&""!=e&&void 0!=e){s.next=4;break}Object(l.Toast)({message:"搜索词不能为空！"}),s.next=12;break;case 4:return a.searchListArr.push(e),h.a.setLocal("searchShopList",a.searchListArr),r=l.Indicator.open({text:"搜索中",spinnerType:"snake"}),s.next=9,Object(c.s)(t,e);case 9:i=s.sent,l.Indicator.close(r),a.searchData=i;case 12:case"end":return s.stop()}},s,a)}))()},hisSearchList:function(){this.hisData=JSON.parse(h.a.getLocal("searchShopList"))},checkInput:function(){""!=this.searchKeyword&&null!=this.searchKeyword||(this.searchData=!1,this.hisSearchList())},allClear:function(){h.a.removeLocal("searchShopList"),this.hisData=[]},revemoIndex:function(t){this.hisData.splice(t,1),h.a.setLocal("searchShopList",this.hisData)}},components:{allHeader:o.a},computed:{},mounted:function(){this.hisSearchList()},watch:{searchKeyword:function(t){t||(this.searchData=!1,this.hisSearchList())}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search"},[a("all-header",[a("span",{attrs:{slot:"headerTitle"},slot:"headerTitle"},[t._v("\n\t\t\t搜索\n\t\t")])]),t._v(" "),a("div",{staticClass:"main-content"},[a("div",{staticClass:"serach_city"},[a("mt-field",{attrs:{placeholder:"请输入商家或美食名称"},nativeOn:{input:function(e){return t.checkInput(e)}},model:{value:t.searchKeyword,callback:function(e){t.searchKeyword=e},expression:"searchKeyword"}}),t._v(" "),a("p",[a("mt-button",{staticClass:"m2",attrs:{type:"primary",size:"large"},on:{click:function(e){return t.actionSearch(t.$route.query.geohash,t.searchKeyword)}}},[t._v("提交搜索")])],1)],1),t._v(" "),t.searchData.length>0?a("div",{staticClass:"search_end"},[a("h3",[t._v("\n\t\t\t\t搜索结果\n\t\t\t")]),t._v(" "),a("dl",[a("dt",[t._v("\n\t\t\t\t\t商家\n\t\t\t\t")]),t._v(" "),t._l(t.searchData,function(e,s){return a("dd",{key:s},[a("router-link",{attrs:{to:{path:"/shop",query:{id:e.id}}}},[a("span",[a("img",{attrs:{src:t.img_url+e.image_path,alt:e.name}})]),t._v(" "),a("div",{staticClass:"seinfo"},[a("h4",[a("em",[t._v(t._s(e.name))]),t._v(" "),e.delivery_mode?a("font",[t._v(t._s(e.delivery_mode.text))]):a("font",[t._v("商家配送")])],1),t._v(" "),a("h5",[t._v("\n\t\t\t\t\t\t\t\t月售 "+t._s(e.recent_order_num)+" 单\n\t\t\t\t\t\t\t")]),t._v(" "),a("h6",[t._v("\n\t\t\t\t\t\t\t\t"+t._s(e.float_delivery_fee||e.float_minimum_order_amount)+"元起送 / 距离 "+t._s(e.distance)+"\n\t\t\t\t\t\t\t")])])])],1)})],2)]):a("div",{staticClass:"his_search"},[a("h4",[t._v("历史记录")]),t._v(" "),a("ul",t._l(t.hisData,function(e,s){return a("li",{key:s},[a("font",[t._v("\n\t\t\t\t\t\t"+t._s(e)+"\n\t\t\t\t\t")]),t._v(" "),a("i",{staticClass:"iconfont icon-close",on:{click:function(e){return e.stopPropagation(),t.revemoIndex(s)}}})],1)}),0),t._v(" "),a("div",{staticClass:"allClear",on:{click:t.allClear}},[t._v("\n\t\t\t\t清空全部历史记录\n\t\t\t")])])])],1)},staticRenderFns:[]};var _=a("VU/8")(u,d,!1,function(t){a("Iv1n")},"data-v-e38f51b8",null);e.default=_.exports},Iv1n:function(t,e){}});