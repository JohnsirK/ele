webpackJsonp([3],{"/yKX":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("Xxa5"),a=s.n(n),o=s("mvHQ"),i=s.n(o),r=s("exGp"),c=s.n(r),d=s("gRE1"),l=s.n(d),u=s("Dd8w"),f=s.n(u),v=s("Au9i"),p=s("NYxO"),_=s("EQn/"),m=s("P9l9"),h=s("YB1/"),g={data:function(){return{saveData:null,backData:[],shopInfoData:[],modeMoney:!1,pickOptions:"微信支付",modeOptions:[{label:"微信支付",value:"微信支付"},{label:"支付宝",value:"支付宝"},{label:"在线支付",value:"在线支付"}],addressSelcet:[],orderListData:[],img_url:"//elm.cangdu.org/img/"}},components:{globelHeader:_.a},computed:f()({},Object(p.e)(["remarkInfoPick","remarkInfoTxt","userinfo","isLogin","nowAddress","shopDetailList"]),{money:function(){for(var t=0,e=0;e<this.saveData.length;e++)t+=this.saveData[e].shop.specfoods[0].price*this.saveData[e].num;return t},saveMarkInfoData:function(){var t=new String;return this.remarkInfoPick&&l()(this.remarkInfoPick).forEach(function(e){t+=e[1]+"，"}),this.remarkInfoTxt?t+this.remarkInfoTxt:t.substr(0,t.lastIndexOf("，"))}}),methods:{closeMode:function(){this.modeMoney=!1},initOrderData:function(){var t=new Array;l()(this.saveData).forEach(function(e){l()(e).forEach(function(s){void 0!=s.item_id&&t.push({attrs:[],extra:{},id:s.specfoods[0].food_id,name:s.specfoods[0].name,packing_fee:s.specfoods[0].packing_fee,price:s.specfoods[0].price,quantity:e.num,sku_id:s.specfoods[0].sku_id,specs:[""],stock:s.specfoods[0].stock})})}),this.orderListData=[t]},goTotal:function(){var t=this;return c()(a.a.mark(function e(){var s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isLogin&&t.userinfo){e.next=5;break}Object(v.Toast)({message:"请登录!",duration:3e3}),t.$router.push("/login"),e.next=15;break;case 5:if(t.addressSelcet){e.next=9;break}Object(v.Toast)({message:"请选择地址!",duration:3e3}),e.next=15;break;case 9:if(s=JSON.parse(t.userinfo),!t.userinfo){e.next=15;break}return e.next=13,Object(m.a)(s.user_id,3276,t.addressSelcet.id,t.shopDetailList.id,t.remarkInfoPick,JSON.parse(i()(t.orderListData)));case 13:1==e.sent.status&&(Object(v.Toast)({message:"付款成功！",duration:5e3,iconClass:"iconfont icon-check"}),t.$router.push("/order"));case 15:case"end":return e.stop()}},e,t)}))()},getMorenAddress:function(){var t=this;return c()(a.a.mark(function e(){var s,n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(h.a.getLocal("userinfo")){e.next=4;break}return e.abrupt("return");case 4:return s=t.userinfo,e.next=7,Object(m.d)(s.user_id);case 7:n=e.sent,t.addressSelcet=n[0];case 9:case"end":return e.stop()}},e,t)}))()},getmore:function(){var t=this;return c()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:h.a.getLocal("defaultAddress")?t.addressSelcet=JSON.parse(h.a.getLocal("defaultAddress")):t.addressSelcet=[];case 1:case"end":return e.stop()}},e,t)}))()}},created:function(){this.saveData=this.$store.state.myfoodinfo,console.log(this.userinfo)},mounted:function(){this.getMorenAddress(),this.initOrderData(),this.getmore()},watch:{nowAddress:function(t){this.addressSelcet=t},$route:function(){this.getMorenAddress()}},filters:{tag_txt:function(t){switch(t){case 2:return"家";case 3:return"学校";case 4:return"公司"}}}},k={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"confirmOrder"},[s("div",[s("globel-header",[s("span",{attrs:{slot:"headerTitle"},slot:"headerTitle"},[t._v("\n\t\t\t\t确认订单\n\t\t\t")])]),t._v(" "),s("div",{staticClass:"main-content"},[s("router-link",{attrs:{to:"/confirmOrder/deliAddress"}},[t.addressSelcet.length>0?s("div",{staticClass:"shoppingAddress white-bg mb2"},[s("ul",[s("li",[s("span",[s("i",{staticClass:"iconfont icon-location"})]),t._v(" "),s("div",{staticClass:"location"},[s("h4",[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t.addressSelcet.name)+"\n\t\t\t\t\t\t\t\t\t"),s("b",[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(t.addressSelcet.phone)+"\n\t\t\t\t\t\t\t\t\t")])]),t._v(" "),s("p",[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t.addressSelcet.address)+" - "+t._s(t.addressSelcet.address_detail)+" \n\t\t\t\t\t\t\t\t")])]),t._v(" "),s("font",[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t._f("tag_txt")(t.addressSelcet.tag_type))+"\n\t\t\t\t\t\t\t")])],1)])]):s("div",{staticClass:"shoppingAddress white-bg mb2"},[s("span",[s("i",{staticClass:"iconfont icon-location"}),t._v("请添加一个收货地址\n\t\t\t\t\t")]),t._v(" "),s("i",{staticClass:"iconfont icon-right goAddressIcon"})])]),t._v(" "),s("div",{staticClass:"deliveryTime white-bg mb2"},[s("h5",[t._v("送达时间")]),t._v(" "),s("p",[s("span",[t._v("尽快送达 | 预计 20 分钟后送达")]),t._v(" "),s("font",{staticStyle:{background:"rgb(87, 169, 255)"}},[t._v("蜂鸟专送")])],1)]),t._v(" "),s("div",{staticClass:"modeMoney white-bg mb2"},[s("ul",[s("li",{on:{click:function(e){t.modeMoney=!t.modeMoney}}},[s("font",[t._v("支付方式")]),t._v(" "),s("span",[t._v(t._s(t.pickOptions)+" "),s("i",{staticClass:"iconfont icon-right"})])],1)])]),t._v(" "),s("mt-popup",{attrs:{position:"bottom"},model:{value:t.modeMoney,callback:function(e){t.modeMoney=e},expression:"modeMoney"}},[s("div",{staticClass:"modeMoneyDialog"},[s("mt-radio",{attrs:{align:"right",title:"支付方式",options:t.modeOptions},nativeOn:{click:function(e){return t.closeMode(e)}},model:{value:t.pickOptions,callback:function(e){t.pickOptions=e},expression:"pickOptions"}})],1)]),t._v(" "),s("div",{staticClass:"orderInfo white-bg mb2"},[s("dl",[s("dt",[s("span",[s("img",{attrs:{src:t.img_url+t.shopDetailList.image_path,alt:""}})]),t._v("\n\t\t\t\t\t\t"+t._s(t.shopDetailList.name)+"\n\t\t\t\t\t")]),t._v(" "),t._l(t.saveData,function(e,n){return s("dd",{key:n},[s("font",[t._v("\n\t\t\t\t\t\t\t"+t._s(e.shop.name)+"\n\t\t\t\t\t\t")]),t._v(" "),s("b",[s("em",[t._v("\n\t\t\t\t\t\t\t\tx "+t._s(e.num)+"\n\t\t\t\t\t\t\t")]),t._v(" "),s("i",[t._v("\n\t\t\t\t\t\t\t\t￥"+t._s(e.shop.specfoods[0].price)+"\n\t\t\t\t\t\t\t")])])],1)})],2),t._v(" "),s("div",{staticClass:"totalmoney"},[s("p",[t._v("\n\t\t\t\t\t\t配送费：￥5\n\t\t\t\t\t")]),t._v(" "),s("p",[t._v("\n\t\t\t\t\t\t订单:￥"+t._s(t.money)+"\n\t\t\t\t\t")]),t._v(" "),s("p",{staticClass:"hlight"},[s("b",[t._v("待支付：￥"+t._s(t.money+5))])])])]),t._v(" "),s("div",{staticClass:"modeMoney white-bg mb2"},[s("ul",[s("li",[s("router-link",{attrs:{to:"/confirmOrder/remark"}},[s("font",[t._v("订单备注")]),t._v(" "),s("span",[t._v(t._s(t.remarkInfoPick||t.remarkInfoTxt?t.saveMarkInfoData:"口味、偏好等")),s("i",{staticClass:"iconfont icon-right"})])],1)],1)])])],1),t._v(" "),s("div",{staticClass:"goOrder"},[s("span",[t._v("\n\t\t\t\t待支付 ￥"+t._s(t.money+5)+"\n\t\t\t")]),t._v(" "),s("font",{on:{click:t.goTotal}},[t._v("\n\t\t\t\t确认下单\n\t\t\t")])],1)],1),t._v(" "),s("transition",{attrs:{name:"right"}},[s("router-view")],1)],1)},staticRenderFns:[]};var b=s("VU/8")(g,k,!1,function(t){s("hxZl")},"data-v-084a94ae",null);e.default=b.exports},TmV0:function(t,e,s){s("fZOM"),t.exports=s("FeBl").Object.values},fZOM:function(t,e,s){var n=s("kM2E"),a=s("mbce")(!1);n(n.S,"Object",{values:function(t){return a(t)}})},gRE1:function(t,e,s){t.exports={default:s("TmV0"),__esModule:!0}},hxZl:function(t,e){},mbce:function(t,e,s){var n=s("lktj"),a=s("TcQ7"),o=s("NpIQ").f;t.exports=function(t){return function(e){for(var s,i=a(e),r=n(i),c=r.length,d=0,l=[];c>d;)o.call(i,s=r[d++])&&l.push(t?[s,i[s]]:i[s]);return l}}}});