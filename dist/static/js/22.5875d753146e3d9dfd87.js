webpackJsonp([22],{FPKy:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Xxa5"),a=n.n(o),s=n("exGp"),r=n.n(s),i=n("Dd8w"),c=n.n(i),d=n("EQn/"),l=n("P9l9"),p=n("YB1/"),u=n("NYxO"),b=n("Au9i"),f={data:function(){return{oldpwd:"",newpwd:"",qrpwd:"",captcha:"",logincode:""}},components:{allHeader:d.a},methods:c()({},Object(u.d)(["getUserInfo"]),{getImgCode:function(){var e=this;return r()(a.a.mark(function t(){var n;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(l.k)();case 2:n=t.sent,console.log(n),e.captcha=n.code;case 5:case"end":return t.stop()}},t,e)}))()},getUserLogin:function(){var e=this;return r()(a.a.mark(function t(){var n;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.userinfo){t.next=26;break}if(""!=e.oldpwd){t.next=5;break}Object(b.Toast)({message:"原密码不能为空",position:"bottom",duration:3e3}),t.next=26;break;case 5:if(""!=e.newpwd){t.next=9;break}Object(b.Toast)({message:"新密码不能为空",position:"bottom",duration:3e3}),t.next=26;break;case 9:if(""!=e.qrpwd){t.next=13;break}Object(b.Toast)({message:"确认密码不能为空",position:"bottom",duration:3e3}),t.next=26;break;case 13:if(e.qrpwd==e.newpwd){t.next=17;break}Object(b.Toast)({message:"两次密码不一致，请重新输入",position:"bottom",duration:3e3}),t.next=26;break;case 17:if(""!=e.logincode){t.next=21;break}Object(b.Toast)({message:"验证码不能为空",position:"bottom",duration:3e3}),t.next=26;break;case 21:return b.Indicator.open({text:"登录中，请稍后...",spinnerType:"fading-circle"}),t.next=24,Object(l.b)(e.userinfo.username,e.oldpwd,e.newpwd,e.qrpwd,e.logincode);case 24:0==(n=t.sent).status?(b.Indicator.close(),Object(b.Toast)({message:n.message,position:"bottom",duration:3e3})):1==n.status&&(b.Indicator.close(),Object(b.Toast)({message:n.success,position:"bottom",duration:3e3}),p.a.removeLocal("userinfo"),e.getUserInfo(null),e.$router.push("/about"));case 26:case"end":return t.stop()}},t,e)}))()}}),computed:c()({},Object(u.e)(["userinfo"]),{pwdTrue:function(){return this.pwdState?"password":""}}),mounted:function(){this.getImgCode(),console.log(this.userinfo)}},m={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"globel-main"},[n("all-header",[n("span",{attrs:{slot:"headerTitle"},slot:"headerTitle"},[e._v("\n\t\t\t修改登录密码\n\t\t")])]),e._v(" "),n("div",{staticClass:"globel-content"},[n("mt-field",{attrs:{label:"旧密码",type:"password",placeholder:"请输入原密码"},model:{value:e.oldpwd,callback:function(t){e.oldpwd=t},expression:"oldpwd"}}),e._v(" "),n("mt-field",{attrs:{label:"新密码",type:"password",placeholder:"请输入新密码"},model:{value:e.newpwd,callback:function(t){e.newpwd=t},expression:"newpwd"}}),e._v(" "),n("mt-field",{attrs:{label:"确认密码",type:"password",placeholder:"请确认新密码"},model:{value:e.qrpwd,callback:function(t){e.qrpwd=t},expression:"qrpwd"}}),e._v(" "),n("mt-field",{attrs:{label:"验证码",placeholder:"请输入验证码",attr:{maxlength:4}},model:{value:e.logincode,callback:function(t){e.logincode=t},expression:"logincode"}},[n("img",{attrs:{src:e.captcha,alt:""}}),e._v(" "),n("font",{on:{click:e.getImgCode}},[e._v("\n\t\t\t\t换一张？ \n\t\t\t")])],1),e._v(" "),n("div",{staticClass:"btnLogin"},[n("mt-button",{attrs:{type:"primary",size:"large"},nativeOn:{click:function(t){return e.getUserLogin(t)}}},[e._v("确认修改")])],1)],1)],1)},staticRenderFns:[]};var w=n("VU/8")(f,m,!1,function(e){n("pTdN")},"data-v-437b05c1",null);t.default=w.exports},pTdN:function(e,t){}});